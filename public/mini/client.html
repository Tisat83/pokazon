<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>mini client • pokazon</title>

  <style>
    /* Фрейм сам не скроллится — скроллим только наш контейнер */
    html, body { height: 100%; margin: 0; overflow: hidden; background: #f6f7f9; }

    /* Единый скролл-контейнер на всю вкладку/фрейм */
    .demo-scroll {
      position: fixed; inset: 0;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* «Сцена» с ограничением ширины */
    .stage {
      width: 100%;
      max-width: 1200px;            /* при желании поменяй ширину демо */
      margin: 24px auto 0;
      padding: 0 12px;
      box-sizing: border-box;
    }

    /* Скриншот как ОДНО изображение (никаких background-ов) */
    .shot {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      background: #eee;
    }

    /* Делаем страницу «высокой», чтобы было что прокручивать */
    .spacer { height: 1400px; }     /* можно менять высоту скролла */
  </style>

  <script>
    // Встроенный режим, только клиентская кнопка
    window.POKAZON_EMBED = true;
    window.POKAZON_ONLY  = 'client';

    // Гарантируем #help
    if (location.hash !== '#help') {
      location.replace(location.pathname + '#help');
    }
  </script>

  <!-- Важно: добавил версию v=embed4, чтобы наверняка обойти кэш -->
  <script defer src="/src/oko-loader.js?v=embed4"></script>
</head>
<body>

  <!-- Единственный скролл -->
  <div class="demo-scroll">
    <div class="stage">
      <img class="shot" src="/assets/screen2.jpg" alt="demo">
      <div class="spacer"></div>
    </div>
  </div>

  <script>
    /* Подстраховка: если вдруг «кнопка оператора» появится — убрать */
    (function nukeOperatorBtn(){
      function kill(){
        document.querySelectorAll('[data-oko="operator"],[data-oko-role="operator-toggle"],.oko-operator,#oko-operator')
          .forEach(el => el.remove());
        document.querySelectorAll('button,a,div').forEach(el=>{
          const t=(el.textContent||'').trim();
          if (t==='ОКО Оператор') el.remove();
        });
      }
      kill();
      const mo=new MutationObserver(kill);
      mo.observe(document.documentElement,{childList:true,subtree:true});
      setTimeout(()=>{ try{mo.disconnect()}catch(e){} }, 2000);
    })();

    /* Прячем заголовок внутри модалки клиента (чтобы не дублировался с твоими заголовками) */
    (function hideClientHeader(){
      function tryHide(){
        const modal = document.querySelector('[data-oko-help-modal], .oko-help-modal, .oko-modal');
        if (!modal) return;
        const head = modal.querySelector('h1,h2,h3,header,.oko-modal__title,strong');
        if (head) head.style.display = 'none';
      }
      document.addEventListener('pokazon:want-help', ()=>setTimeout(tryHide, 300));
      const mo=new MutationObserver(tryHide);
      mo.observe(document.documentElement,{childList:true,subtree:true});
    })();
  </script>

  <!-- Мелкие твики для мини-демки -->
  <script defer src="/mini/mini-compact.js?v=9"></script>
</body>
</html>
