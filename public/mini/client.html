<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>mini client</title>

  <script>
    // мини-страница встраивается во фрейм
    window.POKAZON_EMBED = true;
    if (location.hash !== '#help') {
      location.replace(location.pathname + '#help');
    }
  </script>

  <!-- Грузим виджет/панель (loader уже умеет работать во фрейме) -->
  <script defer src="/src/oko-loader.js?v=embed10"></script>

  <style>
    html, body {
      margin: 0;
      height: 100%;
      overflow-y: auto; /* внутри фрейма нужна прокрутка */
      background: #fff;
    }
    body {
      background-image: url('/assets/screen2.jpg');
      background-repeat: no-repeat;
      background-position: top center;
      background-size: 100% auto;
      padding-bottom: 600px; /* длина полосы прокрутки (оставляем как у вас) */
    }

    /* На всякий случай: любой плавающей кнопке даём огромный z-index */
    .oko-floating, [data-oko-role], .oko-widget-button {
      z-index: 2147483647 !important;
    }
  </style>
</head>
<body>

<script>
/**
 * Пинним плавающую кнопку «Подключить» внутри фрейма,
 * чтобы она всегда была видна в правом нижнем углу.
 */
(function pinFloatingButton(){
  function pin() {
    // ищем кандидатов по атрибутам и по тексту
    var candidates = Array.from(document.querySelectorAll(
      '.oko-floating, .oko-widget-button, [data-oko-role="help-toggle"], button, a'
    ));
    candidates
      .filter(function (el) {
        var t = (el.textContent || '').trim();
        return /Подключить/i.test(t) || el.hasAttribute('data-oko-role');
      })
      .forEach(function (el) {
        el.style.position = 'fixed';
        el.style.right    = '16px';
        el.style.bottom   = '20px';
        el.style.zIndex   = '2147483647';
        el.style.opacity  = '1';
        el.style.pointerEvents = 'auto';
      });
  }
  pin();
  // если виджет дорисуется позже — дёрнем ещё раз
  var timer = setInterval(pin, 500);
  // через 6 секунд хватит
  setTimeout(function(){ clearInterval(timer); }, 6000);
})();
</script>

</body>
</html>
