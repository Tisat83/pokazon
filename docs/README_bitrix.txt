
Интеграция в Битрикс (PC-first)
===============================

1) Загрузите файлы SDK/виджета на ваш домен
-------------------------------------------
На проде файлы должны быть доступны, например:
  https://<ваш-домен>/public/sdk.js

2) Подключите SDK в шаблон сайта
--------------------------------
Вставьте в `local/templates/<ВАШ_ШАБЛОН>/header.php` (перед `</head>`):

  <script src="https://<ваш-домен>/public/sdk.js"></script>

3) Добавьте кнопку запуска (любой блок шаблона, например, в footer.php)
------------------------------------------------------------------------

  <button id="okoStart" class="btn btn-dark">Помощь на странице</button>
  <script>
    document.getElementById('okoStart').addEventListener('click', async function(){
      if (!window.Oko || !window.Oko.startSession) { alert('OKO не загружен'); return; }
      const session = await window.Oko.startSession({
        maskSelectors: ['[data-mask]','input[type=password]','[data-oko-mask]']
      });
      // Выведите код как удобно: модалка, всплывашка, плашка
      alert('Код для оператора: ' + session.code);
    });
  </script>

4) Разметьте ключевые элементы `data-oko-id`
--------------------------------------------
Чтобы оператор мог «прыгать» к нужным местам и подсвечивать их даже без точного попадания по координате — добавьте атрибуты:

  <input type="number" data-oko-id="qty">
  <button data-oko-id="cart">В корзину</button>
  <section data-oko-id="hero">...</section>

5) (Опционально) Маскируйте чувствительные поля
-----------------------------------------------
Поля с `data-mask` (или `input[type=password]`) недоступны для удалённого ввода.

6) Безопасность
---------------
- Видна только текущая страница сайта.
- Сессию можно остановить кнопкой «Стоп» (плашка добавляется SDK).
- Код одноразовый, время жизни короткое (в демо локально). На проде можно ограничить TTL на сервере.

Готово. Для операторов — откройте /operator, введите код клиента и управляйте.
